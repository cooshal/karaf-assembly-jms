<?xml version="1.0" encoding="UTF-8"?>
<features name="${project.artifactId}-${project.version}" xmlns="http://karaf.apache.org/xmlns/features/v1.3.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://karaf.apache.org/xmlns/features/v1.3.0 http://karaf.apache.org/xmlns/features/v1.3.0">

    <repository>mvn:org.apache.karaf.features/enterprise/${karaf.version}/xml/features</repository>
    <repository>mvn:org.apache.karaf.features/spring-legacy/${karaf.version}/xml/features</repository>
    <repository>mvn:org.apache.activemq/activemq-karaf/${activeMQ.version}/xml/features</repository>
    <repository>mvn:org.ops4j.pax.jms/pax-jms-features/1.0.3/xml/features</repository>

    <feature name="eai-broker-dependencies" description="{project.name}" version="${project.version}">
        <details>${project.description}</details>
        <feature>jms</feature>
        <feature>transaction</feature>
        <feature>spring</feature>
        <feature>pax-jms-config</feature>
        <feature>pax-jms-activemq</feature>
        <bundle dependency="true">mvn:org.apache.geronimo.specs/geronimo-j2ee-management_1.1_spec/1.0.1</bundle>
        <bundle dependency="true">mvn:org.apache.geronimo.specs/geronimo-annotation_1.0_spec/1.1.1</bundle>
        <bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.aopalliance/1.0_6</bundle>
        <bundle>mvn:org.apache.activemq/activemq-osgi/${activeMQ.version}</bundle>
    </feature>
    
    <feature name="broker-ds-consumer" description="" version="${project.version}">
        <config name="org.ops4j.connectionfactory-consumer">
            name=prseai-consumer
            jms.url=tcp://localhost:61616
            jms.username=system
            jms.password=manager
            type=activemq
            pool=pooledjms
            osgi.jndi.service.name=jms/eai.consumer
        </config>
    </feature>
    
    <feature name="broker-ds-producer" description="" version="${project.version}">
        <config name="org.ops4j.connectionfactory-producer">
            name=prseai-producer
            jms.url=tcp://localhost:61616
            jms.username=system
            jms.password=manager
            type=activemq
            pool=pooledjms
            osgi.jndi.service.name=jms/eai.producer
        </config>
    </feature>

    
    <feature name="${project.artifactId}" description="EAI Broker Service" version="${project.version}">
        <feature>eai-broker-dependencies</feature>
        <feature>broker-ds-consumer</feature>
        <feature>broker-ds-producer</feature>
    </feature>
</features>